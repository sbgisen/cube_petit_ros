<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="topic" default="/gyro/imu"/>
  <arg name="robot_namespace" default="cube_petit"/>
  <!-- IMU filter -->
  <node name="imu_filter" pkg="imu_drift_correction" type="imu_drift_correction" output="screen">
    <rosparam command="load" file="$(find cube_petit_bringup)/config/sensors/imu_filter.yaml"/>
    <remap from="~imu_in" to="$(arg topic)"/>
    <remap from="~cmd_vel_in" to="/cube_petit/diff_drive_controller/cmd_vel"/>
    <remap from="~odom_in" to="odom"/>
    <remap from="~imu_out" to="/imu/data_raw"/>
  </node>
  <node name="imu_filter_madgwick" pkg="imu_filter_madgwick" type="imu_filter_node">
    <param name="use_mag" value="false"/>
    <param name="publish_tf" value="false"/>
    <param name="fixed_frame" value="odom"/>
    <param name="publish_debug_topics" value="true"/>
    <param name="orientation_stddev" value="0.0316227766"/>
    <remap from="/imu/data" to="/cube_petit/diff_drive_controller/imu"/>
  </node>
</launch>
